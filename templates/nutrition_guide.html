{% extends "base.html" %}

{% block title %}Guía Nutricional - Sistema Experto Culinario{% endblock %}

{% block content %}
<div class="container py-4">
    <!-- Header -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card bg-gradient text-white" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                <div class="card-body text-center py-5">
                    <h1 class="display-5 fw-bold mb-3">
                        <i class="fas fa-apple-alt me-3"></i>
                        Guía Nutricional Inteligente
                    </h1>
                    <p class="lead mb-0">
                        Descubre recetas organizadas por sus beneficios nutricionales
                    </p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Navegación de categorías -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card">
                <div class="card-body">
                    <div class="row text-center">
                        <div class="col-6 col-md-3 mb-2">
                            <a href="#high-protein" class="btn btn-outline-primary w-100">
                                <i class="fas fa-dumbbell d-block mb-1"></i>
                                <small>Alta Proteína</small>
                            </a>
                        </div>
                        <div class="col-6 col-md-3 mb-2">
                            <a href="#high-fiber" class="btn btn-outline-success w-100">
                                <i class="fas fa-leaf d-block mb-1"></i>
                                <small>Alta Fibra</small>
                            </a>
                        </div>
                        <div class="col-6 col-md-3 mb-2">
                            <a href="#low-sodium" class="btn btn-outline-warning w-100">
                                <i class="fas fa-heart d-block mb-1"></i>
                                <small>Bajo Sodio</small>
                            </a>
                        </div>
                        <div class="col-6 col-md-3 mb-2">
                            <a href="#vitamin-rich" class="btn btn-outline-info w-100">
                                <i class="fas fa-sun d-block mb-1"></i>
                                <small>Rico en Vitaminas</small>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Información nutricional general -->
    <div class="row mb-5">
        <div class="col-12">
            <div class="card">
                <div class="card-header bg-info text-white">
                    <h3 class="mb-0">
                        <i class="fas fa-info-circle me-2"></i>
                        Fundamentos de Nutrición
                    </h3>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3 mb-3">
                            <div class="text-center p-3 bg-light rounded">
                                <i class="fas fa-fire fa-2x text-danger mb-2"></i>
                                <h5>Calorías</h5>
                                <p class="small mb-0">Energía que proporciona el alimento. Adulto promedio: 2000-2500 kcal/día</p>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="text-center p-3 bg-light rounded">
                                <i class="fas fa-dumbbell fa-2x text-primary mb-2"></i>
                                <h5>Proteínas</h5>
                                <p class="small mb-0">Construyen y reparan tejidos. Recomendado: 0.8g por kg de peso corporal</p>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="text-center p-3 bg-light rounded">
                                <i class="fas fa-bread-slice fa-2x text-warning mb-2"></i>
                                <h5>Carbohidratos</h5>
                                <p class="small mb-0">Fuente principal de energía. 45-65% de calorías totales diarias</p>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="text-center p-3 bg-light rounded">
                                <i class="fas fa-tint fa-2x text-success mb-2"></i>
                                <h5>Grasas</h5>
                                <p class="small mb-0">Esenciales para absorción de vitaminas. 20-35% de calorías diarias</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Recetas por categoría nutricional -->
    
    <!-- Alta Proteína -->
    <div id="high-protein" class="mb-5">
        <div class="card">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0">
                    <i class="fas fa-dumbbell me-2"></i>
                    Recetas Altas en Proteína (20g+ por porción)
                </h4>
                <p class="mb-0 mt-2 opacity-75">Ideales para deportistas y construcción muscular</p>
            </div>
            <div class="card-body">
                {% if categories.high_protein %}
                <div class="row">
                    {% for recipe in categories.high_protein %}
                    <div class="col-md-6 col-lg-4 mb-3">
                        <div class="card recipe-card h-100">
                            <div class="card-body">
                                <h6 class="card-title">{{ recipe.name }}</h6>
                                <p class="card-text small text-muted">
                                    {% if recipe.description %}
                                        {{ recipe.description[:80] }}...
                                    {% endif %}
                                </p>
                                <div class="mb-2">
                                    {% if recipe.nutritional_info %}
                                    <span class="badge bg-primary">{{ recipe.nutritional_info.protein }}g proteína</span>
                                    <span class="badge bg-secondary">{{ recipe.nutritional_info.calories_per_serving }}kcal</span>
                                    {% endif %}
                                </div>
                                <div class="d-flex justify-content-between align-items-center">
                                    <a href="{{ url_for('main.recipe_detail', recipe_id=recipe.id) }}" class="btn btn-primary btn-sm">Ver Receta</a>
                                    <small class="text-muted">{{ recipe.total_time or 'N/A' }} min</small>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <div class="text-center py-4">
                    <i class="fas fa-info-circle fa-2x text-muted mb-3"></i>
                    <p class="text-muted">No hay recetas disponibles en esta categoría actualmente.</p>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
    
    <!-- Alta Fibra -->
    <div id="high-fiber" class="mb-5">
        <div class="card">
            <div class="card-header bg-success text-white">
                <h4 class="mb-0">
                    <i class="fas fa-leaf me-2"></i>
                    Recetas Altas en Fibra (8g+ por porción)
                </h4>
                <p class="mb-0 mt-2 opacity-75">Beneficiosas para la digestión y saciedad</p>
            </div>
            <div class="card-body">
                {% if categories.high_fiber %}
                <div class="row">
                    {% for recipe in categories.high_fiber %}
                    <div class="col-md-6 col-lg-4 mb-3">
                        <div class="card recipe-card h-100">
                            <div class="card-body">
                                <h6 class="card-title">{{ recipe.name }}</h6>
                                <p class="card-text small text-muted">
                                    {% if recipe.description %}
                                        {{ recipe.description[:80] }}...
                                    {% endif %}
                                </p>
                                <div class="mb-2">
                                    {% if recipe.nutritional_info %}
                                    <span class="badge bg-success">{{ recipe.nutritional_info.fiber }}g fibra</span>
                                    <span class="badge bg-secondary">{{ recipe.nutritional_info.calories_per_serving }}kcal</span>
                                    {% endif %}
                                </div>
                                <div class="d-flex justify-content-between align-items-center">
                                    <a href="{{ url_for('main.recipe_detail', recipe_id=recipe.id) }}" class="btn btn-success btn-sm">Ver Receta</a>
                                    <small class="text-muted">{{ recipe.total_time or 'N/A' }} min</small>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <div class="text-center py-4">
                    <i class="fas fa-info-circle fa-2x text-muted mb-3"></i>
                    <p class="text-muted">No hay recetas disponibles en esta categoría actualmente.</p>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
    
    <!-- Bajo Sodio -->
    <div id="low-sodium" class="mb-5">
        <div class="card">
            <div class="card-header bg-warning text-dark">
                <h4 class="mb-0">
                    <i class="fas fa-heart me-2"></i>
                    Recetas Bajas en Sodio (600mg- por porción)
                </h4>
                <p class="mb-0 mt-2 opacity-75">Ideales para cuidar la presión arterial</p>
            </div>
            <div class="card-body">
                {% if categories.low_sodium %}
                <div class="row">
                    {% for recipe in categories.low_sodium %}
                    <div class="col-md-6 col-lg-4 mb-3">
                        <div class="card recipe-card h-100">
                            <div class="card-body">
                                <h6 class="card-title">{{ recipe.name }}</h6>
                                <p class="card-text small text-muted">
                                    {% if recipe.description %}
                                        {{ recipe.description[:80] }}...
                                    {% endif %}
                                </p>
                                <div class="mb-2">
                                    {% if recipe.nutritional_info %}
                                    <span class="badge bg-warning text-dark">{{ recipe.nutritional_info.sodium }}mg sodio</span>
                                    <span class="badge bg-secondary">{{ recipe.nutritional_info.calories_per_serving }}kcal</span>
                                    {% endif %}
                                </div>
                                <div class="d-flex justify-content-between align-items-center">
                                    <a href="{{ url_for('main.recipe_detail', recipe_id=recipe.id) }}" class="btn btn-warning btn-sm">Ver Receta</a>
                                    <small class="text-muted">{{ recipe.total_time or 'N/A' }} min</small>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <div class="text-center py-4">
                    <i class="fas fa-info-circle fa-2x text-muted mb-3"></i>
                    <p class="text-muted">No hay recetas disponibles en esta categoría actualmente.</p>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
    
    <!-- Rico en Vitaminas -->
    <div id="vitamin-rich" class="mb-5">
        <div class="card">
            <div class="card-header bg-info text-white">
                <h4 class="mb-0">
                    <i class="fas fa-sun me-2"></i>
                    Recetas Ricas en Vitaminas (30mg+ Vit C)
                </h4>
                <p class="mb-0 mt-2 opacity-75">Fortalecen el sistema inmunológico</p>
            </div>
            <div class="card-body">
                {% if categories.vitamin_rich %}
                <div class="row">
                    {% for recipe in categories.vitamin_rich %}
                    <div class="col-md-6 col-lg-4 mb-3">
                        <div class="card recipe-card h-100">
                            <div class="card-body">
                                <h6 class="card-title">{{ recipe.name }}</h6>
                                <p class="card-text small text-muted">
                                    {% if recipe.description %}
                                        {{ recipe.description[:80] }}...
                                    {% endif %}
                                </p>
                                <div class="mb-2">
                                    {% if recipe.nutritional_info %}
                                    <span class="badge bg-info">{{ recipe.nutritional_info.vitamin_c }}mg Vit C</span>
                                    <span class="badge bg-secondary">{{ recipe.nutritional_info.calories_per_serving }}kcal</span>
                                    {% endif %}
                                </div>
                                <div class="d-flex justify-content-between align-items-center">
                                    <a href="{{ url_for('main.recipe_detail', recipe_id=recipe.id) }}" class="btn btn-info btn-sm">Ver Receta</a>
                                    <small class="text-muted">{{ recipe.total_time or 'N/A' }} min</small>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <div class="text-center py-4">
                    <i class="fas fa-info-circle fa-2x text-muted mb-3"></i>
                    <p class="text-muted">No hay recetas disponibles en esta categoría actualmente.</p>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
    
    <!-- Tips nutricionales -->
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header bg-dark text-white">
                    <h4 class="mb-0">
                        <i class="fas fa-lightbulb me-2"></i>
                        Consejos Nutricionales
                    </h4>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <h6><i class="fas fa-utensils text-primary me-2"></i>Planificación de Comidas</h6>
                            <ul class="list-unstyled">
                                <li>• Incluye proteína en cada comida</li>
                                <li>• Llena la mitad del plato con verduras</li>
                                <li>• Elige granos integrales sobre refinados</li>
                                <li>• Varía los colores de frutas y verduras</li>
                            </ul>
                        </div>
                        <div class="col-md-6 mb-3">
                            <h6><i class="fas fa-heart text-danger me-2"></i>Salud Cardiovascular</h6>
                            <ul class="list-unstyled">
                                <li>• Limita el sodio a 2300mg por día</li>
                                <li>• Prefiere grasas insaturadas</li>
                                <li>• Aumenta el consumo de fibra</li>
                                <li>• Modera las grasas saturadas</li>
                            </ul>
                        </div>
                        <div class="col-md-6 mb-3">
                            <h6><i class="fas fa-weight text-success me-2"></i>Control de Peso</h6>
                            <ul class="list-unstyled">
                                <li>• Controla las porciones</li>
                                <li>• Come despacio y mastica bien</li>
                                <li>• Bebe agua antes de las comidas</li>
                                <li>• Equilibra calorías consumidas vs. gastadas</li>
                            </ul>
                        </div>
                        <div class="col-md-6 mb-3">
                            <h6><i class="fas fa-brain text-info me-2"></i>Salud Mental</h6>
                            <ul class="list-unstyled">
                                <li>• Omega-3 para función cerebral</li>
                                <li>• Vitaminas B para estado de ánimo</li>
                                <li>• Magnesio para reducir estrés</li>
                                <li>• Antioxidantes para protección</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    // Smooth scroll para navegación
    document.addEventListener('DOMContentLoaded', function() {
        const links = document.querySelectorAll('a[href^="#"]');
        links.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
    });
</script>
{% endblock %}